<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PECS Education: Lifting for Liberation</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React icons as inline SVG components
        const Share2 = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="18" cy="5" r="3" />
                <circle cx="6" cy="12" r="3" />
                <circle cx="18" cy="19" r="3" />
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" />
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" />
            </svg>
        );

        const Users = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
            </svg>
        );

        const TrendingUp = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                <polyline points="17 6 23 6 23 12" />
            </svg>
        );

        const Calculator = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="4" y="2" width="16" height="20" rx="2" />
                <line x1="8" y1="6" x2="16" y2="6" />
                <line x1="16" y1="14" x2="16" y2="14.01" />
                <line x1="12" y1="14" x2="12" y2="14.01" />
                <line x1="8" y1="14" x2="8" y2="14.01" />
                <line x1="16" y1="18" x2="16" y2="18.01" />
                <line x1="12" y1="18" x2="12" y2="18.01" />
                <line x1="8" y1="18" x2="8" y2="18.01" />
            </svg>
        );

        const Plus = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19" />
                <line x1="5" y1="12" x2="19" y2="12" />
            </svg>
        );

        const Trash2 = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6" />
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                <line x1="10" y1="11" x2="10" y2="17" />
                <line x1="14" y1="11" x2="14" y2="17" />
            </svg>
        );

        function WeightliftingFundraiser() {
          const [totalWeight, setTotalWeight] = useState(0);
          const [participantCount, setParticipantCount] = useState(0);
          const [uniqueParticipants, setUniqueParticipants] = useState(new Set());
          const [name, setName] = useState('');
          const [inputMode, setInputMode] = useState('total');
          const [totalInput, setTotalInput] = useState('');
          const [blocks, setBlocks] = useState([{ id: 1, sets: '', reps: '', weight: '' }]);
          const [recentLifts, setRecentLifts] = useState([]);
          const [showSuccess, setShowSuccess] = useState(false);

          useEffect(() => {
            const params = new URLSearchParams(window.location.search);
            const urlWeight = params.get('weight');
            const urlName = params.get('name');
            
            if (urlWeight && urlName) {
              const decodedName = decodeURIComponent(urlName);
              const parsedWeight = parseFloat(urlWeight);
              
              if (!isNaN(parsedWeight)) {
                addContribution(decodedName, parsedWeight);
              }
            }
          }, []);

          const addContribution = (contributorName, contributedWeight) => {
            const normalizedName = contributorName.trim().toLowerCase();
            setTotalWeight(prev => prev + contributedWeight);
            setUniqueParticipants(prev => {
              const newSet = new Set(prev);
              newSet.add(normalizedName);
              return newSet;
            });
            setParticipantCount(prev => {
              const newSet = new Set(uniqueParticipants);
              newSet.add(normalizedName);
              return newSet.size;
            });
            setRecentLifts(prev => [{
              name: contributorName,
              weight: contributedWeight,
              time: new Date().toLocaleTimeString()
            }, ...prev.slice(0, 4)]);
            setShowSuccess(true);
            setTimeout(() => setShowSuccess(false), 3000);
          };

          const addBlock = () => {
            const newId = Math.max(...blocks.map(b => b.id)) + 1;
            setBlocks([...blocks, { id: newId, sets: '', reps: '', weight: '' }]);
          };

          const removeBlock = (id) => {
            if (blocks.length > 1) {
              setBlocks(blocks.filter(block => block.id !== id));
            }
          };

          const updateBlock = (id, field, value) => {
            setBlocks(blocks.map(block => 
              block.id === id ? { ...block, [field]: value } : block
            ));
          };

          const calculateTotalWeight = () => {
            if (inputMode === 'total') {
              return parseFloat(totalInput) || 0;
            } else {
              return blocks.reduce((total, block) => {
                const s = parseFloat(block.sets) || 0;
                const r = parseFloat(block.reps) || 0;
                const w = parseFloat(block.weight) || 0;
                return total + (s * r * w);
              }, 0);
            }
          };

          const handleAddLift = () => {
            const calculatedWeight = calculateTotalWeight();
            if (name && calculatedWeight > 0) {
              addContribution(name, calculatedWeight);
              setName('');
              setTotalInput('');
              setBlocks([{ id: 1, sets: '', reps: '', weight: '' }]);
            }
          };

          const generateShareLink = () => {
            const calculatedWeight = calculateTotalWeight();
            if (!name || calculatedWeight <= 0) {
              alert('Please enter your name and weight lifted first!');
              return;
            }
            
            const baseUrl = window.location.origin + window.location.pathname;
            const shareUrl = `${baseUrl}?name=${encodeURIComponent(name)}&weight=${calculatedWeight}`;
            
            navigator.clipboard.writeText(shareUrl).then(() => {
              alert('Link copied to clipboard! Share it with others to add your lift to the challenge.');
            });
          };

          const goalWeight = 500000;
          const progress = Math.min((totalWeight / goalWeight) * 100, 100);
          const calculatedWeight = calculateTotalWeight();

          const getMilestone = () => {
            const milestones = [
              { weight: 500000, emoji: '✈️', name: 'Boeing 747', desc: 'Incredible! You\'ve lifted the weight of a fully loaded Boeing 747 airplane!' },
              { weight: 100000, emoji: '🚀', name: 'Space Shuttle', desc: 'You\'ve lifted a Space Shuttle!' },
              { weight: 50000, emoji: '🦕', name: 'T-Rex', desc: 'You\'ve lifted a Tyrannosaurus Rex!' },
              { weight: 10000, emoji: '🚌', name: 'Double-Decker Buses', desc: 'Amazing! That\'s the weight of 5 London double-decker buses!' },
              { weight: 5000, emoji: '🚗', name: 'Car', desc: 'You\'ve lifted an entire car!' },
              { weight: 2000, emoji: '🦏', name: 'Rhino', desc: 'That\'s as heavy as a Rhinoceros!' },
              { weight: 1000, emoji: '🐬', name: 'Dolphin', desc: 'You\'ve lifted the weight of a Dolphin!' },
              { weight: 500, emoji: '🐻', name: 'Grizzly Bear', desc: 'That\'s one Grizzly Bear worth of weight!' },
              { weight: 100, emoji: '🦘', name: 'Kangaroo', desc: 'You\'ve lifted a Kangaroo!' },
            ];
            
            for (let milestone of milestones) {
              if (totalWeight >= milestone.weight) {
                return milestone;
              }
            }
            return null;
          };

          const currentMilestone = getMilestone();

          return (
            <div className="min-h-screen bg-black p-4 md:p-8" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>
              <div className="max-w-4xl mx-auto">
                <div className="bg-zinc-900 rounded-2xl shadow-xl p-6 md:p-8 mb-6 border border-zinc-800">
                  <div className="flex flex-col items-center justify-center mb-6">
                    <img 
                      src="logo.png" 
                      alt="PECS Logo" 
                      className="w-40 h-40 mb-4"
                    />
                    <h1 className="text-4xl md:text-6xl font-bold text-white text-center tracking-wider" style={{ fontFamily: "'Bebas Neue', sans-serif", letterSpacing: '0.05em' }}>
                      PECS EDUCATION
                    </h1>
                    <h2 className="text-2xl md:text-3xl font-bold text-red-600 text-center mt-2 tracking-wider" style={{ fontFamily: "'Bebas Neue', sans-serif", letterSpacing: '0.05em' }}>
                      LIFTING FOR LIBERATION
                    </h2>
                  </div>

                  {showSuccess && (
                    <div className="mb-6 p-4 bg-red-900 border border-red-600 text-white rounded-lg animate-pulse">
                      🎉 Contribution added successfully!
                    </div>
                  )}

                  {currentMilestone && (
                    <div className="mb-6 p-6 bg-gradient-to-r from-yellow-600 to-orange-600 border-2 border-yellow-400 text-white rounded-xl shadow-lg">
                      <div className="flex items-center gap-4">
                        <div className="text-6xl">{currentMilestone.emoji}</div>
                        <div className="flex-1">
                          <h3 className="text-2xl font-bold mb-1" style={{ fontFamily: "'Bebas Neue', sans-serif" }}>
                            MILESTONE UNLOCKED: {currentMilestone.name}!
                          </h3>
                          <p className="text-yellow-100">{currentMilestone.desc}</p>
                        </div>
                      </div>
                    </div>
                  )}

                  <div className="grid md:grid-cols-2 gap-6 mb-8">
                    <div className="bg-red-600 rounded-xl p-6 text-white border border-red-700">
                      <div className="flex items-center mb-2">
                        <TrendingUp className="w-6 h-6 mr-2" />
                        <p className="text-red-100">Total Weight Lifted</p>
                      </div>
                      <p className="text-4xl font-bold">{totalWeight.toLocaleString()} kg</p>
                      <p className="text-sm text-red-100 mt-2">Goal: {goalWeight.toLocaleString()} kg</p>
                    </div>

                    <div className="bg-zinc-700 rounded-xl p-6 text-white border border-zinc-600">
                      <div className="flex items-center mb-2">
                        <Users className="w-6 h-6 mr-2" />
                        <p className="text-zinc-200">Total Participants</p>
                      </div>
                      <p className="text-4xl font-bold">{participantCount}</p>
                    </div>
                  </div>

                  <div className="mb-8">
                    <div className="flex justify-between mb-2">
                      <span className="text-sm font-medium text-white">Progress to Goal</span>
                      <span className="text-sm font-medium text-red-500">{progress.toFixed(1)}%</span>
                    </div>
                    <div className="w-full bg-zinc-800 rounded-full h-4 overflow-hidden border border-zinc-700">
                      <div 
                        className="bg-gradient-to-r from-red-600 to-red-700 h-4 rounded-full transition-all duration-500"
                        style={{ width: `${progress}%` }}
                      ></div>
                    </div>
                  </div>

                  <div className="space-y-4 mb-6">
                    <div>
                      <label className="block text-sm font-medium text-white mb-2">
                        Your Name
                      </label>
                      <input
                        type="text"
                        value={name}
                        onChange={(e) => setName(e.target.value)}
                        className="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 text-white rounded-lg focus:ring-2 focus:ring-red-600 focus:border-transparent"
                        placeholder="Enter your name"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-white mb-3">
                        Input Method
                      </label>
                      <div className="flex gap-3 mb-4">
                        <button
                          onClick={() => setInputMode('total')}
                          className={`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${
                            inputMode === 'total'
                              ? 'bg-red-600 text-white border border-red-500'
                              : 'bg-zinc-800 text-zinc-300 border border-zinc-700 hover:bg-zinc-700'
                          }`}
                        >
                          Total Weight
                        </button>
                        <button
                          onClick={() => setInputMode('calculated')}
                          className={`flex-1 py-2 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 ${
                            inputMode === 'calculated'
                              ? 'bg-red-600 text-white border border-red-500'
                              : 'bg-zinc-800 text-zinc-300 border border-zinc-700 hover:bg-zinc-700'
                          }`}
                        >
                          <Calculator className="w-4 h-4" />
                          Calculate
                        </button>
                      </div>

                      {inputMode === 'total' ? (
                        <div>
                          <label className="block text-sm font-medium text-white mb-2">
                            Total Weight Lifted (kg)
                          </label>
                          <input
                            type="number"
                            value={totalInput}
                            onChange={(e) => setTotalInput(e.target.value)}
                            className="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 text-white rounded-lg focus:ring-2 focus:ring-red-600 focus:border-transparent"
                            placeholder="Enter total weight in kg"
                            min="0"
                            step="0.1"
                          />
                        </div>
                      ) : (
                        <div className="space-y-4">
                          {blocks.map((block, index) => (
                            <div key={block.id} className="p-4 border-2 border-zinc-700 rounded-lg bg-zinc-800">
                              <div className="flex justify-between items-center mb-3">
                                <h4 className="font-semibold text-white">Block {index + 1}</h4>
                                {blocks.length > 1 && (
                                  <button
                                    onClick={() => removeBlock(block.id)}
                                    className="text-red-500 hover:text-red-400 p-1"
                                  >
                                    <Trash2 className="w-4 h-4" />
                                  </button>
                                )}
                              </div>
                              <div className="grid grid-cols-3 gap-2">
                                <div>
                                  <label className="block text-xs font-medium text-zinc-400 mb-1">
                                    Sets
                                  </label>
                                  <input
                                    type="number"
                                    value={block.sets}
                                    onChange={(e) => updateBlock(block.id, 'sets', e.target.value)}
                                    className="w-full px-3 py-2 bg-zinc-900 border border-zinc-700 text-white rounded-lg focus:ring-2 focus:ring-red-600 focus:border-transparent"
                                    placeholder="3"
                                    min="0"
                                  />
                                </div>
                                <div>
                                  <label className="block text-xs font-medium text-zinc-400 mb-1">
                                    Reps
                                  </label>
                                  <input
                                    type="number"
                                    value={block.reps}
                                    onChange={(e) => updateBlock(block.id, 'reps', e.target.value)}
                                    className="w-full px-3 py-2 bg-zinc-900 border border-zinc-700 text-white rounded-lg focus:ring-2 focus:ring-red-600 focus:border-transparent"
                                    placeholder="10"
                                    min="0"
                                  />
                                </div>
                                <div>
                                  <label className="block text-xs font-medium text-zinc-400 mb-1">
                                    Weight (kg)
                                  </label>
                                  <input
                                    type="number"
                                    value={block.weight}
                                    onChange={(e) => updateBlock(block.id, 'weight', e.target.value)}
                                    className="w-full px-3 py-2 bg-zinc-900 border border-zinc-700 text-white rounded-lg focus:ring-2 focus:ring-red-600 focus:border-transparent"
                                    placeholder="50"
                                    min="0"
                                    step="0.1"
                                  />
                                </div>
                              </div>
                              {block.sets && block.reps && block.weight && (
                                <div className="mt-2 text-sm text-zinc-400">
                                  Block total: <span className="font-semibold text-red-500">
                                    {(parseFloat(block.sets) * parseFloat(block.reps) * parseFloat(block.weight)).toFixed(1)} kg
                                  </span>
                                </div>
                              )}
                            </div>
                          ))}
                          
                          <button
                            onClick={addBlock}
                            className="w-full py-2 px-4 border-2 border-dashed border-zinc-700 rounded-lg text-zinc-400 hover:border-red-600 hover:text-red-500 transition-colors flex items-center justify-center gap-2"
                          >
                            <Plus className="w-4 h-4" />
                            Add Another Block
                          </button>

                          {calculatedWeight > 0 && (
                            <div className="p-4 bg-red-950 border border-red-800 rounded-lg">
                              <p className="text-sm text-zinc-300">Total Calculated Weight:</p>
                              <p className="text-3xl font-bold text-red-500">
                                {calculatedWeight.toFixed(1)} kg
                              </p>
                            </div>
                          )}
                        </div>
                      )}
                    </div>

                    <div className="flex gap-3">
                      <button
                        onClick={handleAddLift}
                        className="flex-1 bg-red-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-red-700 transition-colors border border-red-500"
                      >
                        Add My Lift
                      </button>
                      <button
                        onClick={generateShareLink}
                        className="flex items-center justify-center gap-2 bg-zinc-700 text-white py-3 px-6 rounded-lg font-semibold hover:bg-zinc-600 transition-colors border border-zinc-600"
                      >
                        <Share2 className="w-5 h-5" />
                        Share Link
                      </button>
                    </div>
                  </div>

                  {recentLifts.length > 0 && (
                    <div>
                      <h3 className="text-xl font-semibold text-white mb-4">Recent Lifts</h3>
                      <div className="space-y-2">
                        {recentLifts.map((lift, index) => (
                          <div key={index} className="flex justify-between items-center p-3 bg-zinc-800 rounded-lg border border-zinc-700">
                            <span className="font-medium text-white">{lift.name}</span>
                            <div className="text-right">
                              <span className="text-red-500 font-bold">{lift.weight.toFixed(1)} kg</span>
                              <span className="text-zinc-500 text-sm ml-2">{lift.time}</span>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}
                </div>

                <div className="bg-zinc-900 rounded-xl shadow-md p-6 border border-zinc-800">
                  <h3 className="text-lg font-semibold text-white mb-3">How It Works</h3>
                  <ol className="list-decimal list-inside space-y-2 text-zinc-300">
                    <li>Enter your name</li>
                    <li>Choose to input total weight OR calculate from multiple blocks of sets, reps, and weight</li>
                    <li>Add multiple blocks for different exercises or weight variations</li>
                    <li>Click "Add My Lift" to contribute to the team total</li>
                  </ol>
                </div>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<WeightliftingFundraiser />);
    </script>
</body>
</html>